<!-- Navbar público -->
<nav class="bg-white shadow-md sticky top-0 z-50">
  <div class="container mx-auto px-4">
    <div class="flex justify-between items-center h-16">
      <!-- Logo -->
      <div class="flex items-center">
        <a routerLink="/" class="flex items-center">
          <img src="assets/images/logo-iasd.png" alt="Iglesia Adventista del Séptimo Día" class="h-12 w-auto">
        </a>
      </div>

      <!-- Desktop Menu -->
      <div class="hidden md:flex items-center space-x-6">
        <a routerLink="/" routerLinkActive="text-primary" [routerLinkActiveOptions]="{exact: true}"
          class="text-gray-700 hover:text-primary transition-colors">
          {{ 'navbar.home' | translate }}
        </a>
        <a routerLink="/news" routerLinkActive="text-primary"
          class="text-gray-700 hover:text-primary transition-colors">
          {{ 'navbar.news' | translate }}
        </a>
        <a routerLink="/churches" routerLinkActive="text-primary"
          class="text-gray-700 hover:text-primary transition-colors">
          {{ 'navbar.churches' | translate }}
        </a>
        <a routerLink="/courses" routerLinkActive="text-primary"
          class="text-gray-700 hover:text-primary transition-colors">
          {{ 'navbar.courses' | translate }}
        </a>

        <!-- Departamentos Dropdown -->
        <div class="relative group">
          <button class="text-gray-700 hover:text-primary transition-colors flex items-center">
            Departamentos
            <i class="fas fa-chevron-down ml-1 text-xs"></i>
          </button>

          <div
            class="hidden group-hover:block absolute left-0 top-full w-72 bg-white rounded-md shadow-lg py-2 z-50 max-h-96 overflow-y-auto">
            <a *ngFor="let dept of departments" [routerLink]="['/departments', dept.slug]"
              class="block px-4 py-3 text-sm text-gray-700 hover:bg-primary hover:text-white transition-colors">
              <i class="fas fa-{{dept.icon}} mr-3" [style.color]="dept.color"></i>
              {{dept.name}}
            </a>
          </div>
        </div>

        <!-- Sobre Nosotros Dropdown -->
        <div class="relative group">
          <button class="text-gray-700 hover:text-primary transition-colors flex items-center">
            Sobre Nosotros
            <i class="fas fa-chevron-down ml-1 text-xs"></i>
          </button>

          <div class="hidden group-hover:block absolute left-0 top-full w-64 bg-white rounded-md shadow-lg py-2 z-50">
            <a *ngFor="let section of aboutSections" [routerLink]="['/about', section.slug]"
              class="block px-4 py-3 text-sm text-gray-700 hover:bg-primary hover:text-white transition-colors">
              <i class="fas fa-{{section.icon}} mr-3 text-primary"></i>
              {{section.title}}
            </a>
          </div>
        </div>

        <a routerLink="/videos" routerLinkActive="text-primary"
          class="text-gray-700 hover:text-primary transition-colors">
          {{ 'navbar.videos' | translate }}
        </a>

        <!-- Auth buttons -->
        <div *ngIf="!isLoggedIn">
          <a routerLink="/login" class="btn-primary">
            {{ 'navbar.login' | translate }}
          </a>
        </div>
        <div *ngIf="isLoggedIn" class="flex items-center space-x-3">
          <button *ngIf="hasAdminPermissions()" (click)="goToAdmin()" class="btn-secondary">
            <i class="fas fa-cog mr-2"></i>
            {{ 'navbar.admin' | translate }}
          </button>
          <button (click)="logout()" class="text-red-600 hover:text-red-700">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </div>

      <!-- Mobile menu button -->
      <button (click)="toggleMenu()" class="md:hidden text-gray-700">
        <i class="fas" [ngClass]="isMenuOpen ? 'fa-times' : 'fa-bars'"></i>
      </button>
    </div>

    <!-- Mobile Menu -->
    <div *ngIf="isMenuOpen" class="md:hidden pb-4">
      <a routerLink="/" (click)="toggleMenu()" class="block py-2 text-gray-700 hover:text-primary">
        {{ 'navbar.home' | translate }}
      </a>
      <a routerLink="/news" (click)="toggleMenu()" class="block py-2 text-gray-700 hover:text-primary">
        {{ 'navbar.news' | translate }}
      </a>
      <a routerLink="/churches" (click)="toggleMenu()" class="block py-2 text-gray-700 hover:text-primary">
        {{ 'navbar.churches' | translate }}
      </a>
      <a routerLink="/courses" (click)="toggleMenu()" class="block py-2 text-gray-700 hover:text-primary">
        {{ 'navbar.courses' | translate }}
      </a>

      <!-- Departamentos Mobile Menu -->
      <div class="py-2">
        <div class="font-semibold text-gray-800 mb-2">Departamentos</div>
        <a *ngFor="let dept of departments" [routerLink]="['/departments', dept.slug]" (click)="toggleMenu()"
          class="block py-2 pl-4 text-sm text-gray-600 hover:text-primary">
          <i class="fas fa-{{dept.icon}} mr-2" [style.color]="dept.color"></i>
          {{dept.name}}
        </a>
      </div>

      <a routerLink="/videos" (click)="toggleMenu()" class="block py-2 text-gray-700 hover:text-primary">
        {{ 'navbar.videos' | translate }}
      </a>

      <div *ngIf="isLoggedIn" class="mt-3 pt-3 border-t">
        <button *ngIf="hasAdminPermissions()" (click)="goToAdmin(); toggleMenu()"
          class="block w-full text-left py-2 text-gray-700">
          <i class="fas fa-cog mr-2"></i>
          {{ 'navbar.admin' | translate }}
        </button>
        <button (click)="logout(); toggleMenu()" class="block w-full text-left py-2 text-red-600">
          <i class="fas fa-sign-out-alt mr-2"></i>
          {{ 'navbar.logout' | translate }}
        </button>
      </div>

      <div *ngIf="!isLoggedIn" class="mt-3 pt-3 border-t">
        <a routerLink="/login" (click)="toggleMenu()" class="block py-2 text-primary font-medium">
          {{ 'navbar.login' | translate }}
        </a>
      </div>
    </div>
  </div>
</nav>